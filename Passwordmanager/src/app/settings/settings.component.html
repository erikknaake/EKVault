<div class="matcard">
  <mat-card>
    <h1 class="mat-h1">Settings</h1>
    <mat-accordion>
      <mat-expansion-panel>
        <mat-expansion-panel-header>
          <mat-panel-title>
            Password generation
          </mat-panel-title>
        </mat-expansion-panel-header>
        <div class="column">
          <mat-form-field>
            <input matInput placeholder="Password length" type="number" [formControl]="passwordLengthControl" #passwordLength required>
            <help matSuffix tooltip="The length a newly generated password should be"></help>
            <mat-error *ngIf="passwordLengthControl.invalid">{{getPasswordLengthError()}}</mat-error>
          </mat-form-field>
        </div>

        <app-change-alphabet class="settings-row"></app-change-alphabet>

        <div class="column">
          <button mat-raised-button (click)="discardSettings()">Discard changes</button>
          <button mat-raised-button [disabled]="passwordLengthControl.invalid || this.alphabetService.invalid" (click)="saveSettings()">Save changes</button>
          <button mat-raised-button (click)="restoreDefaultSettings()">Restore defaults</button>
        </div>
      </mat-expansion-panel>
      <mat-expansion-panel>
        <mat-expansion-panel-header>
          <mat-panel-title>
            Change masterpassword
          </mat-panel-title>
        </mat-expansion-panel-header>
        <div class="column">
          <button mat-raised-button (click)="changeMasterpassword()">Change masterpassword</button>
        </div>
      </mat-expansion-panel>
      <!--TODO: change passwords-->
      <mat-expansion-panel>
        <mat-expansion-panel-header>
          <mat-panel-title>
            Usernames
          </mat-panel-title>
        </mat-expansion-panel-header>
        <app-edit-usernames></app-edit-usernames>
      </mat-expansion-panel>
      <mat-expansion-panel>
        <mat-expansion-panel-header>
          <mat-panel-title>
            Import/Export
          </mat-panel-title>
        </mat-expansion-panel-header>
        <mat-expansion-panel>
          <mat-expansion-panel-header>
            <mat-panel-title>
              Settings
            </mat-panel-title>
          </mat-expansion-panel-header>
          <div class="column">
            <button mat-raised-button (click)="importSettings()">Import Settings</button>
            <button mat-raised-button (click)="exportSettings()">Export Settings</button>
          </div>
        </mat-expansion-panel>
        <mat-expansion-panel>
          <mat-expansion-panel-header>
            <mat-panel-title>
              Passwords
            </mat-panel-title>
          </mat-expansion-panel-header>
          <div class="column">
            <button mat-raised-button (click)="importPasswords()">Import Passwords</button>
            <button mat-raised-button (click)="exportPasswords()">Export Passwords</button>
          </div>
        </mat-expansion-panel>
      </mat-expansion-panel>
      <mat-expansion-panel>
        <mat-expansion-panel-header>
          <mat-panel-title>
            Theming
          </mat-panel-title>
        </mat-expansion-panel-header>
        <mat-slide-toggle [checked]="this.settings.isDarkTheme.value" (change)="changeTheme($event.checked)">Dark-theme</mat-slide-toggle>
      </mat-expansion-panel>
    </mat-accordion>

  </mat-card>
</div>
